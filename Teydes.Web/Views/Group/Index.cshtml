@using Teydes.Service.DTOs.Groups;
@model List<GroupForResultDto>
@{
    ViewBag.Tab = 4;
}

<div class="card card-flush">
    <div class="card-header align-items-center py-5 gap-2 gap-md-5">
        <div class="card-title">
            <form data-kt-search-element="form" class="justify-content-end position-relative mb-5 border border-gray-300" autocomplete="off" style="border-color:#fff;border-radius:7px;">
                <input type="hidden" />
                <span class="svg-icon svg-icon-2 svg-icon-lg-1 svg-icon-gray-500 position-absolute ms-4 top-50  translate-middle-y">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="#7239EA"></rect>
                        <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="#7239EA"></path>
                    </svg>
                </span>
                <input type="text" class="form-control form-control-lg form-control-solid px-15"
                       name="search"
                       value="@ViewBag.search"
                       placeholder="Qidirish ..."
                       data-kt-search-element="input" />
            </form>
        </div>
        <div class="card-toolbar flex-row-fluid justify-content-end gap-5">
            <a class="btn btn-primary" asp-controller="Group" asp-action="CreateGroup">
                <span class="svg-icon svg-icon-2 me-1">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.3" d="M3 13V11C3 10.4 3.4 10 4 10H20C20.6 10 21 10.4 21 11V13C21 13.6 20.6 14 20 14H4C3.4 14 3 13.6 3 13Z" fill="currentColor" />
                        <path d="M13 21H11C10.4 21 10 20.6 10 20V4C10 3.4 10.4 3 11 3H13C13.6 3 14 3.4 14 4V20C14 20.6 13.6 21 13 21Z" fill="currentColor" />
                    </svg>
                </span>
                Group
            </a>
        </div>
    </div>
    <div class="card-body pt-0">
        <div class="dataTables_wrapper dt-bootstrap4 no-footer">
            <div class="table-responsive">
                <table class="table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer">
                    <thead>
                        <tr class="text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0">
                            <th class="text-start min-w-50px text-hover-gray-700">ID</th>
                            <th class="text-start min-w-200px text-hover-gray-700">NOMI</th>
                            <th class="text-start min-w-100px text-hover-gray-700">SIG`IMI</th>
                            <th class="text-start min-w-100px text-hover-gray-700">KURS</th>
                            <th class="text-start min-w-100px text-hover-gray-700">HOLATLAR</th>
                        </tr>
                    </thead>
                    <tbody class="fw-semibold text-gray-800">
                        @{
                            if (ViewBag.groups != null)
                            {
                                foreach (var group in ViewBag.groups)
                                {
                                    <tr class="tr-shadow text-dark">
                                        <td class="text-start px-sm-0">
                                            <span class="fw-bold">@group.Id</span>
                                        </td>
                                        <td class="text-start px-sm-0 d-flex align-items-center">
                                            <span class="fw-bold text-hover-primary text-gray-800 ms-3">@group.Name</span>
                                        </td>
                                        <td class="text-start">
                                            <span class="fw-bold px-sm-0 text-gray-500">@group.Contain</span>
                                        </td>
                                        @{
                                            foreach(var course in ViewBag.courses)
                                            {
                                                if(course.Id == group.CourseId)
                                                {   
                                                <td class="text-start">
                                                        @if (course.Name.StartsWith("Dotnet"))
                                                        {
                                                            <div class="badge badge-light-primary">DotNet</div>
                                                        }
                                                        else if (course.Name.StartsWith("Go"))
                                                        {
                                                            <div class="badge badge-light-info">Go</div>
                                                        }
                                                        else
                                                        {
                                                        <span class="fw-bold px-sm-0 text-gray-500">@course.Name</span>    
                                                        }
                                                 </td>
                                                }
                                            }
                                        }
                                       
                                        <td class="text-start">
                                            <a class="btn btn-icon btn-warning" asp-controller="group" asp-action="updateredirect" asp-route-groupId="@group.Id">
                                                <svg width="24px" height="24px" class="w-2 h-2 text-blue-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.96 2.96 0 0 0 .13 5H5Z" />
                                                    <path d="M6.737 11.061a2.961 2.961 0 0 1 .81-1.515l6.117-6.116A4.839 4.839 0 0 1 16 2.141V2a1.97 1.97 0 0 0-1.933-2H7v5a2 2 0 0 1-2 2H0v11a1.969 1.969 0 0 0 1.933 2h12.134A1.97 1.97 0 0 0 16 18v-3.093l-1.546 1.546c-.413.413-.94.695-1.513.81l-3.4.679a2.947 2.947 0 0 1-1.85-.227 2.96 2.96 0 0 1-1.635-3.257l.681-3.397Z" />
                                                    <path d="M8.961 16a.93.93 0 0 0 .189-.019l3.4-.679a.961.961 0 0 0 .49-.263l6.118-6.117a2.884 2.884 0 0 0-4.079-4.078l-6.117 6.117a.96.96 0 0 0-.263.491l-.679 3.4A.961.961 0 0 0 8.961 16Zm7.477-9.8a.958.958 0 0 1 .68-.281.961.961 0 0 1 .682 1.644l-.315.315-1.36-1.36.313-.318Zm-5.911 5.911 4.236-4.236 1.359 1.359-4.236 4.237-1.7.339.341-1.699Z" />
                                                </svg>
                                            </a>
                                            |
                                            <a class="btn btn-icon btn-danger" asp-controller="group" asp-action="deleteredirect" asp-route-id="@group.Id">
                                                <svg width="24px" height="24px" class="w-2 h-2 text-blue-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 20">
                                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h16M7 8v8m4-8v8M7 1h4a1 1 0 0 1 1 1v3H6V2a1 1 0 0 1 1-1ZM3 5h12v13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5Z" />
                                                </svg>
                                            </a>
                                            |
                                            <a class="btn btn-icon btn-info" asp-controller="group" asp-action="getbyid" asp-route-groupId="@group.Id">
                                                <svg width="24px" height="24px"  class="w-2 h-2 text-blue-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M18 7.5h-.423l-.452-1.09.3-.3a1.5 1.5 0 0 0 0-2.121L16.01 2.575a1.5 1.5 0 0 0-2.121 0l-.3.3-1.089-.452V2A1.5 1.5 0 0 0 11 .5H9A1.5 1.5 0 0 0 7.5 2v.423l-1.09.452-.3-.3a1.5 1.5 0 0 0-2.121 0L2.576 3.99a1.5 1.5 0 0 0 0 2.121l.3.3L2.423 7.5H2A1.5 1.5 0 0 0 .5 9v2A1.5 1.5 0 0 0 2 12.5h.423l.452 1.09-.3.3a1.5 1.5 0 0 0 0 2.121l1.415 1.413a1.5 1.5 0 0 0 2.121 0l.3-.3 1.09.452V18A1.5 1.5 0 0 0 9 19.5h2a1.5 1.5 0 0 0 1.5-1.5v-.423l1.09-.452.3.3a1.5 1.5 0 0 0 2.121 0l1.415-1.414a1.5 1.5 0 0 0 0-2.121l-.3-.3.452-1.09H18a1.5 1.5 0 0 0 1.5-1.5V9A1.5 1.5 0 0 0 18 7.5Zm-8 6a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Z" />
                                                </svg>
                                            </a>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                    </tbody>
                    <!--end::Table body-->
                </table>
            </div>
        </div>
        <!--end::Table-->
    </div>
    <!--end::Card body-->
</div>
